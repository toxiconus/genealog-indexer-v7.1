<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Genealog Indexer v10</title>

  <!-- External Libraries -->
  <script src="https://openseadragon.github.io/openseadragon/openseadragon.min.js"></script>
  <script src="https://unpkg.com/tesseract.js@5.1.0/dist/tesseract.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="../acta-v1-models.js"></script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/toolbar.css">
  <link rel="stylesheet" href="css/thumbnails.css">
  <link rel="stylesheet" href="css/viewer.css">
  <link rel="stylesheet" href="css/forms.css">
  <link rel="stylesheet" href="css/form-chrztów.css">
  <link rel="stylesheet" href="css/form-małżeństw.css">
  <link rel="stylesheet" href="css/form-zgonów.css">
  <link rel="stylesheet" href="css/tables.css">
</head>
<body>

  <!-- Toolbar (górny panel) -->
  <div id="toolbar" class="toolbar"></div>

  <!-- Główny kontener -->
  <div class="main-container">
    <!-- Miniatury (lewy panel) -->
    <div id="thumbsBar" class="thumbs-bar"></div>

    <!-- Viewer -->
    <div id="viewer" class="viewer-container"></div>

    <!-- Prawy panel (formularz + tabela) -->
    <div id="rightPanel">
      <div id="floatingForm"></div>
      <div id="tableSection"></div>
    </div>
  </div>

  <!-- Firebase Initialization -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAZ-d9kxHrijCW9P8ZXbZORvUPai0uzOXY",
      authDomain: "acta-9ea64.firebaseapp.com",
      projectId: "acta-9ea64",
      storageBucket: "acta-9ea64.firebasestorage.app",
      messagingSenderId: "1031481893980",
      appId: "1:1031481893980:web:1598979629a824fdf0b299",
      measurementId: "G-E6J3J4P41P"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    window.db = db;
    window.auth = auth;

    window.dispatchEvent(new Event('firebaseReady'));
  </script>

  <!-- Skrypty – UWAGA: type="module" jest kluczowe! -->
  <script type="module">
    // Załaduj moduł testowy (dostęp z konsoli do window.testData)
    import './test-data.js';
    
    // Inicjalizuj aplikację
    import { initApp } from './js/main.js';
    initApp();  // uruchamia wszystko
  </script>
</body>
</html>
