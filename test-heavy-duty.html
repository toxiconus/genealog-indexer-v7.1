<!DOCTYPE html>
<html>
<head>
    <title>Test Heavy-Duty Preset</title>
    <style>
        body { font-family: Arial; background: #f0f0f0; padding: 20px; }
        .test-section { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #0078d4; }
        .passed { color: green; font-weight: bold; }
        .failed { color: red; font-weight: bold; }
        code { background: #f5f5f5; padding: 2px 5px; border-radius: 3px; }
        iframe { width: 100%; height: 800px; border: 2px solid #0078d4; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Test Heavy-Duty Preset</h1>
    
    <div class="test-section">
        <h2>Test 1: Sprawdzenie struktury presetu</h2>
        <p>Heavy-duty powinien mieÄ‡:</p>
        <ul>
            <li>backgroundSubtraction: 50 âœ“</li>
            <li>morphologyClose: 50 âœ“</li>
            <li>adaptiveThreshold: 80 âœ“</li>
            <li>autoInvert: true âœ“</li>
            <li>gaussianBlur: 1 âœ“</li>
            <li>medianBlur: 3 âœ“</li>
        </ul>
        <p><strong>Status:</strong> Czeka na testowanie w aplikacji</p>
    </div>

    <div class="test-section">
        <h2>Test 2: Sprawdzenie funkcji filtrÃ³w</h2>
        <p>Funkcje do przetestowania:</p>
        <ul>
            <li><code>backgroundSubtraction(imageData, kernelSize)</code> - wyrÃ³wnanie nierÃ³wnego tÅ‚a</li>
            <li><code>morphologyClose(imageData, kernelSize)</code> - poÅ‚Ä…czenie przerwanych kresek</li>
            <li><code>autoInvert(imageData)</code> - detekcja jasnego tekstu na ciemnym tle</li>
            <li><code>invertColors(imageData)</code> - inwersja kolorÃ³w</li>
        </ul>
        <p><strong>Status:</strong> Funkcje zaimplementowane w kodzie</p>
    </div>

    <div class="test-section">
        <h2>Test 3: Live Test w Aplikacji</h2>
        <p>Kroki testu:</p>
        <ol>
            <li>ZaÅ‚aduj testowy obraz (dowolny PDF scan genealogiczny)</li>
            <li>Kliknij <strong>Postprocess</strong> w toolbar</li>
            <li>Powinien pojawiÄ‡ siÄ™ przycisk <strong>Heavy-Duty</strong> w dolnym panelu presetÃ³w</li>
            <li>Kliknij <strong>Heavy-Duty</strong> - powinno zastosowaÄ‡ peÅ‚ny potok</li>
            <li>SprawdÅº efekt - tekst powinien byÄ‡ wyraÅºniejszy, tÅ‚o wyrÃ³wnane</li>
            <li>OtwÃ³rz DevTools (F12) i sprawdÅº console czy sÄ… logi ğŸ¨</li>
        </ol>
        <p><strong>Status:</strong> PoniÅ¼ej znajduje siÄ™ embedded aplikacja</p>
    </div>

    <div class="test-section">
        <h2>Aplikacja v7.0 z Heavy-Duty Filtrem</h2>
        <iframe src="http://localhost:5173/viewer-osd-v7.html"></iframe>
    </div>

    <div class="test-section">
        <h2>Potok Heavy-Duty (Sekwencja filtrÃ³w)</h2>
        <pre>
1. Canvas GPU Filters (fast)
   - levels: 40, autoContrast: ON, sepia: 10

2. Histogram Equalization (OpenCV)
   âœ“ WyrÃ³wnanie zakresu dynamicznego

3. Background Subtraction (OpenCV) â† NOWE
   âœ“ kernelSize: 50 â†’ wyrÃ³wnanie nierÃ³wnego tÅ‚a

4. Gaussian Blur (OpenCV) â† DENOISING
   âœ“ kernelSize: 1 (radius=1, sÅ‚aby blur)

5. Median Blur (OpenCV) â† DENOISING
   âœ“ kernelSize: 3 (usuniÄ™cie soli i pieprzu)

6. Archival Document Enhancement (pixel-level)
   âœ“ strength: 100 (maksymalny boost kontrastu)

7. Descreen (removes halftone)
   âœ“ strength: 50 (removes scanlines)

8. Adaptive Threshold (OpenCV) â† BINARYZACJA
   âœ“ blockSize: 31, constant: 5 (lokalna binaryzacja)

9. Morphology Close (OpenCV) â† NOWE
   âœ“ kernelSize: 50 â†’ poÅ‚Ä…czenie przerwanych kresek

10. Auto-Invert (OpenCV)
    âœ“ JeÅ›li >70% pikseli jest ciemnych â†’ inwertuj
        </pre>
    </div>

    <div class="test-section">
        <h2>Oczekiwane Rezultaty dla Trudnych DokumentÃ³w</h2>
        <ul>
            <li><strong>Tekst sÅ‚aby/wyblakÅ‚y:</strong> powinien byÄ‡ wyraÅºny dziÄ™ki archival enhancement + histogram</li>
            <li><strong>NierÃ³wne oÅ›wietlenie:</strong> powinno byÄ‡ wyrÃ³wnane dziÄ™ki background subtraction</li>
            <li><strong>Rozmazane krawÄ™dzie liter:</strong> powinny byÄ‡ ostre dziÄ™ki morphology close</li>
            <li><strong>Szum papierowy:</strong> powinien byÄ‡ usuniÄ™ty dziÄ™ki gaussian + median blur</li>
            <li><strong>Tekst biaÅ‚y na czarnym:</strong> powinien byÄ‡ automatycznie inwertowany</li>
            <li><strong>Tekst do OCR:</strong> po adaptive threshold bÄ™dzie czystÄ… binaryzacjÄ…</li>
        </ul>
    </div>

    <script>
        console.log('ğŸ”§ Heavy-Duty Test Page Loaded');
        console.log('OtwÃ³rz http://localhost:5173/viewer-osd-v7.html w nowej karcie do live testowania');
    </script>
</body>
</html>
